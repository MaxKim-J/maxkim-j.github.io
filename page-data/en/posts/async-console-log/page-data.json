{"componentChunkName":"component---src-pages-en-posts-mdx-frontmatter-slug-tsx","path":"/en/posts/async-console-log/","result":{"data":{"post":{"id":"3b44d4bb-4434-5177-958f-81a409e13880","slug":"async-console-log-en","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Solving Problems with console.log and Microtask Queue\",\n  \"description\": \"Which log should be taken first?\",\n  \"date\": \"2020-09-10T00:00:00.000Z\",\n  \"category\": \"tech\",\n  \"slug\": \"async-console-log\",\n  \"tags\": [\"javascript\"],\n  \"lang\": \"en\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I encountered a few console log ordering problems in job interviews this summer. Some of them were easy to solve if you understand what event loops and asynchronous programming are, while others asked for something a little more advanced than that: if I give you a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".js\"), \" file and run it, what will it output first?\"), mdx(\"p\", null, \"In this post, I'll try to summarize the concepts of asynchronous programming that were asked in the console log questions in technical interviews. These concepts are not too trivial and can help you in real programming.\"), mdx(\"h2\", {\n    \"id\": \"prerequisite-knowledge\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#prerequisite-knowledge\",\n    \"aria-label\": \"prerequisite knowledge permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Prerequisite knowledge\"), mdx(\"p\", null, \"I hope this post adds something to the following knowledge of JS asynchronous programming.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Event loops\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Asynchronous logic processing order\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Execution Context\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Promise\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Async/Await\")), mdx(\"h2\", {\n    \"id\": \"solve-the-problem---asynchronous-pikachu\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#solve-the-problem---asynchronous-pikachu\",\n    \"aria-label\": \"solve the problem   asynchronous pikachu permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Solve the problem - Asynchronous Pikachu\"), mdx(\"p\", null, \"The key to this problem is that the same asynchronous logic can have different processing priorities. In an event loop, there is a concept called a microtask queue in addition to the regular task queue. The callbacks in the microtask queue must all be fulfilled, and the queue must be empty before the callbacks in the task queue can be executed. Using Axios and the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://pokeapi.co/\"\n  }, \"Pok\\xE9Api\"), \", I created a simple problem based on Pikachu going into battle(?).\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"javascript\",\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"// pikachu.js\\nasync function comeOutPikachu() {\\n  // 1\\n  setTimeout(() => {\\n    console.log(`Pikachu has recovered ${amount} of health from the ${selectedBerry} fruit!)\\n  }, 2000);\\n\\n  // 2\\n  let amount = 0;\\n  let selectedBerry = '';\\n\\n  // 3\\n  axios.get('https://pokeapi.co/api/v2/berry/1/').then((berry) => {\\n    setTimeout(() => {\\n      console.log(`Berry ${berry.data.name} arrived via http communication!`);\\n      selectedBerry = berry.data.name;\\n    }, 1000);\\n  });\\n\\n  // 4\\n  axios.get('https://pokeapi.co/api/v2/berry/25/').then((berry) => {\\n    console.log(`Berry ${berry.data.name} arrived via http communication!`);\\n    selectedBerry = berry.data.name;\\n  });\\n\\n  // 5\\n  for (let i = 0; i < 50; i++) {\\n    amount += 1;\\n  }\\n\\n  // 6\\n  new Promise((resolve, reject) => {\\n    resolve('Pikachu Million Volts');\\n  }).then((data) => {\\n    setTimeout(() => console.log(`Pikachu~~~~~~~~~~~`));\\n    setTimeout(() => console.log(`Pikachu's million volt effect was powerful!`), 5000);\\n    console.log(data);\\n  });\\n\\n  // 7\\n  const otherPromise = await new Promise((resolve, reject) => {\\n    resolve('Ore all Pikachu');\\n  });\\n\\n  // 8\\n  console.log(otherPromise);\\n\\n  // 9\\n  setTimeout(() => console.log('Pikachu is cute'));\\n\\n  // 10\\n  Promise.resolve('Pikachu body slam').then((data) => console.log(data));\\n}\\n\\ncomeOutPikachu();\"), \"\\n        \"), mdx(\"p\", null, \"Roughly speaking, the example consists of Pikachu using a bunch of moves and then regaining health from a tree fruit delivered over HTTP. Can you recognize the order of the console log?\"), mdx(\"p\", null, \"It isn't apparent. There's a mix of synchronous and asynchronous logic, a setTimeout in the callback, and a setTimeout that doesn't have a promise or a time argument and is fulfilled as soon as resolve is used. To correctly order the output, we need to make three more distinctions.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Although not all JavaScript statements behave this way, this is a pragmatic approach to problem-solving.\")), mdx(\"p\", null, \"The blocks will behave in the following order: synchronous => complete asynchronous microtask => complete asynchronous task => incomplete asynchronous task/microtask.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/59c456c05c87f77500f22b103b0ae801/5a190/async.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"50%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVQoz4WSSY6FMAxE//2PgYTYcAIWIMQMC+ZZDGK6hltlKSiNuj8LK0mZPJcdPud5EuI4DhL767o4xPmpP3Py3Y8s7PtOy7LQPM8c27bd2rquNE0TB3I4Q8c3MuMXEMkkSUhVVYrj+IY3TUPDMJBpmqQoClmWRV3XUdu2XACO/wQCgMtFUfCKj6GVZUlVVVGWZZSmKecR0F+BqNr3/V0drcGRYRik6zrlec7uNU0j27Y5/2/LAoh24BDtAgpAFEUUhiE7xFiwhz6O47vDJxAw13XJ930GBkFAjuMwFLN9naEAilfFrABBu9hjfp7n8Vy/OsQ8AMMMscKhXATusRdd1HX9/VGwPkPo+B9lXT7Lj/IDjpHJcc6Cw/MAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"async\",\n    \"title\": \"async\",\n    \"src\": \"/static/59c456c05c87f77500f22b103b0ae801/5a190/async.png\",\n    \"srcSet\": [\"/static/59c456c05c87f77500f22b103b0ae801/5a46d/async.png 300w\", \"/static/59c456c05c87f77500f22b103b0ae801/0a47e/async.png 600w\", \"/static/59c456c05c87f77500f22b103b0ae801/5a190/async.png 800w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"h3\", {\n    \"id\": \"1-asynchronoussynchronous-distinction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#1-asynchronoussynchronous-distinction\",\n    \"aria-label\": \"1 asynchronoussynchronous distinction permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"1. Asynchronous/synchronous distinction\"), mdx(\"p\", null, \"To get a good idea of the order in which the output is printed, we can probably distinguish between synchronous and asynchronous logic based on the large blocks (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"{}\"), \") since synchronous logic is always processed before asynchronous logic.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"point: synchronous logic processing precedes asynchronous logic\"), \".\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Synchronous logic: variable declaration (2), for statement (5)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Asynchronous logic: callbacks (3,4,6,10) inside then that are processed when the Promise is fulfilled, Await (7), console.log (8) that depends on Await, setTimeout (1, 9)\")), mdx(\"h3\", {\n    \"id\": \"2-completeincomplete-distinction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#2-completeincomplete-distinction\",\n    \"aria-label\": \"2 completeincomplete distinction permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"2. Complete/Incomplete Distinction\"), mdx(\"p\", null, \"However, this distinction is not enough to correctly order the output because asynchronous logic is not always executed in the order in which it is coded. Next, we need to determine whether the asynchronous logic is complete.\"), mdx(\"p\", null, \"Promises have a concept of resolve and rejection: if it's either, it's complete, not just pending. When a promise is resolved, the callback of the then method is called asynchronously. In the case of setTimeout, the time to resolve is when the time passed to the callback as an argument has elapsed. The callback is invoked asynchronously at the time of completion.\"), mdx(\"p\", null, \"A Promise object is considered resolved as soon as it is created, resolved due to resolve or reject, or resolved as quickly as it enters the callstack if the time argument for setTimeOut is zero or missing. The associated callback is called immediately.\"), mdx(\"p\", null, \"However, Axios asynchronous requests don't know exactly when they will be completed, and even setTimeOut with a time argument doesn't know precisely when the callback will be called because it will only be called when the preceding task queue, the tasks in the call stack, is finished processing.\"), mdx(\"p\", null, \"Furthermore, we cannot say that promises in unfinished asynchronous logic that are unconditional microtasks will be processed before setTimeOut. If a promise takes a long time to fulfill and the microtask queue is empty, setTimeOut may be processed before it.\"), mdx(\"p\", null, \"However, if we saw that HTTP requests were being processed quickly, we might infer that setTimeOut with time factors of 2 and 5 seconds would be processed more slowly.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Point: Immediate completion of asynchronous logic precedes unfinished asynchronous logic, and the exact order between asynchronous logic is unknown\"), \".\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Immediate: resolved promises (6,7,10), console.log(8) which depends on resolve promises, setTimeOut(9) which has no time argument\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Incomplete: axios(3, 4), setTimeOut(1) with a time argument\")), mdx(\"h3\", {\n    \"id\": \"3-microtasktask-distinction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#3-microtasktask-distinction\",\n    \"aria-label\": \"3 microtasktask distinction permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"3. Microtask/Task Distinction\"), mdx(\"p\", null, \"We're still going: We need to distinguish between microtasks and tasks to determine the order in which to execute our immediate-completion asynchronous logic. A microtask is a task that has a higher priority than a regular task. Even if tasks are waiting, the microtask will be executed first. In the problem, the callback of Promise belongs to a microtask, while the callback of setTimeOut belongs to a task.\"), mdx(\"p\", null, \"According to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/\"\n  }, \"this post\"), \", task scheduling aims to schedule JavaScript and DOM-related behaviors to be executed sequentially. In contrast, microtask scheduling aims to schedule behaviors so they can be executed \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"right after\"), \" the current behavior. It's a high prioritization.\"), mdx(\"p\", null, \"From there, it's my opinion. I think logic that is more likely to make direct changes to the script in a callback as a result of asynchronous behavior, such as http communication, is a better fit for high-priority microtasks than DOM event handling or setTimeOut, which executes a predetermined action after a certain amount of time. That's why Promises are classified as microtasks.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"point: microtasks precede tasks\"), \".\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Microtask: Promise(6,7,8,10)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Task: setTimeOut(9)\")), mdx(\"h3\", {\n    \"id\": \"4-asynchronous-logic-in-callbacks\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#4-asynchronous-logic-in-callbacks\",\n    \"aria-label\": \"4 asynchronous logic in callbacks permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"4. Asynchronous logic in callbacks\"), mdx(\"p\", null, \"The then method of promises 3 and 6 also contains asynchronous logic. Let's examine it again.\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"javascript\",\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"// pikachu.js\\n\\n// 3\\naxios.get('https://pokeapi.co/api/v2/berry/1/').then((berry) => {\\n  setTimeout(() => {\\n    console.log(`Berry ${berry.data.name} arrived via http communication!`);\\n    berry = berry.data.name;\\n  }, 1000);\\n});\\n\\n// 6\\nnew Promise((resolve, reject) => {\\n  resolve('Pikachu Million Volts');\\n}).then((data) => {\\n  setTimeout(() => console.log(`Pikachu~~~~~~~~~~~`));\\n  setTimeout(() => console.log(`Pikachu's Million Volt was powerful!`), 5000);\\n  console.log(data);\\n});\"), \"\\n        \"), mdx(\"p\", null, \"This is where it gets confusing, but inside a block, the flow is essentially the same as described above. In cases like #6, the Promise is completed immediately, and the callback is called immediately. At this point, we encounter a completed setTimeOut and an unfinished setTimeOut. These setTimeOuts are queued up in the task queue from the callback with the completion condition and executed after all the microtasks outside the block are finished. So, in the end, only the synchronization logic, console.log, is executed first, and the setTimeOuts are handled later.\"), mdx(\"p\", null, \"Another tip is that if you have asynchronous logic among the statements in the same execution context, the callbacks of that asynchronous logic are \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"blown away\"), \". The execution context no longer controls whether or not the callbacks attached to the asynchronous logic are executed. The event loop will fire them when some condition is completed.\"), mdx(\"p\", null, \"In #3, the promise fires when the HTTP request completes. After that, we do one more piece of unfinished asynchronous processing with setTimeOut, where the callback will be called when all the microtasks have been processed. However, we need to know when because it's unfinished and has a time argument.\"), mdx(\"h2\", {\n    \"id\": \"correct-answer\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#correct-answer\",\n    \"aria-label\": \"correct answer permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Correct answer.\"), mdx(\"p\", null, \"The correct answer is that the effect was powerful after Pikachu attacked and recovered his health with fruit.\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"shell\",\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"Pikachu Million Volt #6\\nPikachu All Ore #7\\nPikachu Body Slam # 10\\nPika~~~chu~~~~~~~~~~~ # 6 promise's then inner callback (immediate completion setTimeOut)\\nPikachu cuddles # 9\\nGREPA fruit has arrived via HTTP communication # 4\\nThe cheri fruit has arrived via HTTP communication # 3\\nPikachu has recovered 50 health from the CHERI fruit! # 1\\nPikachu's million volts were powerful! # 6 promise's then inner callback (incomplete setTimeOut)\"), \"\\n        \"), mdx(\"p\", null, \"With the processing prioritization described above, the output should look like this.\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"shell\",\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"# Synchronization - for the statement, the amount becomes 50\\n\\n# Immediate completion of asynchronous microtask (Promise)\\nPikachu Million Volts\\nOre All Pikachu\\nHeadbutt Pikachu\\n\\n# Immediately complete asynchronous task(setTimeOut(fn,0))\\nPika~~~Choo~~~~~~~~~~~\\nPikachu Cute\\n\\n# Unfinished asynchronous\\nGREPA fruit has arrived via HTTP communication!\\nThe CHERI fruit has arrived via HTTP communication!\\nPikachu has recovered 50 health from the cheri fruit!\\nThe effect of Pikachu's Million Volt was powerful!\"), \"\\n        \"), mdx(\"p\", null, \"For asynchronous logic that doesn't complete immediately, the order can change depending on which logic is processed first. Here, we see that the HTTP communication is generally processed faster than setTimeOut with time factors of 2 and 5 seconds. Of course, it's impossible to say which of the two HTTP communications will be processed first, but if you run it multiple times, you can see the following results.\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"shell\",\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"# cheri is sometimes processed before grepa.\\n\\nCHERI fruit arrived over HTTP!\\nThe grepa fruit has arrived via http!\\nPikachu has recovered 50 health from the CHERI fruit!\\nThe effect of Pikachu's Million Volt was powerful!\"), \"\\n        \"), mdx(\"p\", null, \"We've solved a complex console.log problem; how did you like it?! I'm sorry if I didn't write too kindly, as I assumed you understood and continued the explanation. If you want to learn more about the in-depth concepts of event loops, please refer to the reference below. This post will give you a better understanding of the priorities of asynchronous processing...!\"), mdx(\"h2\", {\n    \"id\": \"reference\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#reference\",\n    \"aria-label\": \"reference permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"reference\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://ui.toast.com/weekly-pick/ko_20160617/\"\n  }, \"JavaScript and Event Loops\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/\"\n  }, \"Tasks, microtasks, queues, and schedule\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://ko.javascript.info/event-loop\"\n  }, \"Event Loops, Macros, and Microtasks\"))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Solving Problems with console.log and Microtask Queue","date":"2020년 09월 10일","description":"Which log should be taken first?","tags":["javascript"]}},"postSlugList":{"nodes":[{"frontmatter":{"slug":null}},{"frontmatter":{"slug":null}},{"frontmatter":{"slug":null}},{"frontmatter":{"slug":null}},{"frontmatter":{"slug":"mad-max"}},{"frontmatter":{"slug":"mad-max"}},{"frontmatter":{"slug":"how-to-growth"}},{"frontmatter":{"slug":"how-to-growth"}},{"frontmatter":{"slug":"olivia-rodrigo"}},{"frontmatter":{"slug":"olivia-rodrigo"}},{"frontmatter":{"slug":"2023-flexteam-restrospect"}},{"frontmatter":{"slug":"2023-retorspect"}},{"frontmatter":{"slug":"2023-flexteam-restrospect"}},{"frontmatter":{"slug":"2023-retorspect"}},{"frontmatter":{"slug":"tkdodo-react-query-commentary"}},{"frontmatter":{"slug":"tkdodo-react-query-commentary"}},{"frontmatter":{"slug":"on-stage-best"}},{"frontmatter":{"slug":"on-stage-best"}},{"frontmatter":{"slug":"nodejs-server-monitoring"}},{"frontmatter":{"slug":"nodejs-server-monitoring"}},{"frontmatter":{"slug":"i-can-do-this-all-day"}},{"frontmatter":{"slug":"i-can-do-this-all-day"}},{"frontmatter":{"slug":"retrospect-university"}},{"frontmatter":{"slug":"retrospect-university"}},{"frontmatter":{"slug":"module-federation-shared"}},{"frontmatter":{"slug":"module-federation-shared"}},{"frontmatter":{"slug":"tanjiro"}},{"frontmatter":{"slug":"tanjiro"}},{"frontmatter":{"slug":"module-federation-concepts"}},{"frontmatter":{"slug":"module-federation-concepts"}},{"frontmatter":{"slug":"eternal-sunshine"}},{"frontmatter":{"slug":"eternal-sunshine"}},{"frontmatter":{"slug":"business-driven"}},{"frontmatter":{"slug":"business-driven"}},{"frontmatter":{"slug":"uncertainty"}},{"frontmatter":{"slug":"uncertainty"}},{"frontmatter":{"slug":"runtime-integration-micro-frontends"}},{"frontmatter":{"slug":"runtime-integration-micro-frontends"}},{"frontmatter":{"slug":"tanstack-query-v4-preview"}},{"frontmatter":{"slug":"tanstack-query-v4-preview"}},{"frontmatter":{"slug":"writing-like-that"}},{"frontmatter":{"slug":"writing-like-that"}},{"frontmatter":{"slug":"2022-retorspect"}},{"frontmatter":{"slug":"2022-retorspect"}},{"frontmatter":{"slug":"monorepo-tooling"}},{"frontmatter":{"slug":"monorepo-tooling"}},{"frontmatter":{"slug":"break-up"}},{"frontmatter":{"slug":"break-up"}},{"frontmatter":{"slug":"sustainable-aimless"}},{"frontmatter":{"slug":"sustainable-aimless"}},{"frontmatter":{"slug":"job-searching-retrospect"}},{"frontmatter":{"slug":"job-searching-retrospect"}},{"frontmatter":{"slug":"2021-retorspect"}},{"frontmatter":{"slug":"2021-retorspect"}},{"frontmatter":{"slug":"web-accessiblity-virtuous-cycle"}},{"frontmatter":{"slug":"web-accessiblity-virtuous-cycle"}},{"frontmatter":{"slug":"frontend-tooling-ideas"}},{"frontmatter":{"slug":"frontend-tooling-ideas"}},{"frontmatter":{"slug":"suspense-argibraic-effect"}},{"frontmatter":{"slug":"suspense-argibraic-effect"}},{"frontmatter":{"slug":"packet-travel"}},{"frontmatter":{"slug":"packet-travel"}},{"frontmatter":{"slug":"dev-job-retrospect"}},{"frontmatter":{"slug":"dev-job-retrospect"}},{"frontmatter":{"slug":"redux-store-structure"}},{"frontmatter":{"slug":"redux-store-structure"}},{"frontmatter":{"slug":"react-native-ci-cd"}},{"frontmatter":{"slug":"react-native-ci-cd"}},{"frontmatter":{"slug":"like-legacy"}},{"frontmatter":{"slug":"like-legacy"}},{"frontmatter":{"slug":"what-type-of-developer-am-i"}},{"frontmatter":{"slug":"what-type-of-developer-am-i"}},{"frontmatter":{"slug":"how-to-minimize-redux-saga-typing"}},{"frontmatter":{"slug":"how-to-minimize-redux-saga-typing"}},{"frontmatter":{"slug":"how-to-use-redux-saga"}},{"frontmatter":{"slug":"how-to-use-redux-saga"}},{"frontmatter":{"slug":"github-actions-slack-bot"}},{"frontmatter":{"slug":"github-actions-slack-bot"}},{"frontmatter":{"slug":"frontend-infrastructure"}},{"frontmatter":{"slug":"frontend-infrastructure"}},{"frontmatter":{"slug":"react-query-preview"}},{"frontmatter":{"slug":"react-query-preview"}},{"frontmatter":{"slug":"keyboard-input"}},{"frontmatter":{"slug":"keyboard-input"}},{"frontmatter":{"slug":"precedent-bot-retrospect"}},{"frontmatter":{"slug":"precedent-bot-retrospect"}},{"frontmatter":{"slug":"nuxt-ssr"}},{"frontmatter":{"slug":"nuxt-ssr"}},{"frontmatter":{"slug":"async-console-log"}},{"frontmatter":{"slug":"async-console-log"}},{"frontmatter":{"slug":"thought-ts"}},{"frontmatter":{"slug":"thought-ts"}},{"frontmatter":{"slug":"dev-job-after-junior"}},{"frontmatter":{"slug":"dev-job-after-junior"}},{"frontmatter":{"slug":"protect-var-against-undefined"}},{"frontmatter":{"slug":"protect-var-against-undefined"}},{"frontmatter":{"slug":"school-personal-project"}},{"frontmatter":{"slug":"school-personal-project"}},{"frontmatter":{"slug":"vue-comp-test"}},{"frontmatter":{"slug":"vue-comp-test"}},{"frontmatter":{"slug":"dom-pos-scroll"}},{"frontmatter":{"slug":"dom-pos-scroll"}},{"frontmatter":{"slug":"2020-retorspect"}},{"frontmatter":{"slug":"2020-retorspect"}},{"frontmatter":{"slug":"function-props-vuejs"}},{"frontmatter":{"slug":"function-props-vuejs"}},{"frontmatter":{"slug":"cra-webpack-config"}},{"frontmatter":{"slug":"cra-webpack-config"}},{"frontmatter":{"slug":"react-component-this"}},{"frontmatter":{"slug":"react-component-this"}},{"frontmatter":{"slug":"git-start"}},{"frontmatter":{"slug":"git-start"}},{"frontmatter":{"slug":"js-pure-function"}},{"frontmatter":{"slug":"js-pure-function"}},{"frontmatter":{"slug":"hufs-semester-clock"}},{"frontmatter":{"slug":"hufs-semester-clock"}},{"frontmatter":{"slug":"js-map"}},{"frontmatter":{"slug":"js-map"}},{"frontmatter":{"slug":"why-dev"}},{"frontmatter":{"slug":"why-dev"}}]}},"pageContext":{"id":"b588cd85-2526-547b-a6f6-e47f549ad67e","frontmatter__slug":"async-console-log","__params":{"frontmatter__slug":"async-console-log"}}},"staticQueryHashes":["1865044719"]}